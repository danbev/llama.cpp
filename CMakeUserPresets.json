{
  "version": 6,
  "configurePresets": [
    {
      "name": "danbev-cpu-base",
      "hidden": true,
      "inherits": "base",
      "description": "Common flags for all my CPU builds",
      "generator": "Ninja",
      "cacheVariables": {
        "LLAMA_CURL": "ON",
        "GGML_NATIVE": "ON",
        "LLAMA_BUILD_TESTS": "ON",
        "LLAMA_BUILD_EXAMPLES": "ON",
        "LLAMA_BUILD_SERVER": "ON"
      }
    },
    {
      "name": "cpu-debug",
      "displayName": "Local CPU Debug build",
      "inherits": ["danbev-cpu-base", "debug"]
    },
    {
      "name": "cpu-release",
      "displayName": "Local CPU Release build",
      "inherits": ["danbev-cpu-base", "release"]
    },
    {
      "name": "danbev-cuda-base",
      "hidden": true,
      "inherits": "base",
      "description": "Common flags for all my CUDA builds",
      "generator": "Ninja",
      "cacheVariables": {
        "LLAMA_CURL": "ON",
        "GGML_CUDA": "ON",
        "GGML_CPU_AARCH64": "OFF",
        "GGML_CUDA_F16": "ON",
        "GGML_NATIVE": "ON",
        "LLAMA_BUILD_TESTS": "ON",
        "LLAMA_BUILD_EXAMPLES": "ON"
      }
    },
    {
      "name": "cuda-89-debug",
      "displayName": "Local RTX 4070 (Arch 89)",
      "inherits": ["danbev-cuda-base", "debug"],
      "cacheVariables": {
        "CMAKE_CUDA_ARCHITECTURES": "89",
        "GGML_CUDA_DEBUG": "OFF",
        "CMAKE_CUDA_FLAGS": "-G -g"
      }
    },
    {
      "name": "cuda-89-release",
      "displayName": "Local RTX 4070 (Arch 89) Release",
      "inherits": ["danbev-cuda-base", "release"],
      "cacheVariables": {
        "CMAKE_CUDA_ARCHITECTURES": "89"
      }
    },
    {
      "name": "dgx-spark-debug",
      "displayName": "DGX Spark Debug",
      "inherits": ["danbev-cuda-base", "debug"],
      "description": "Standard debug build for DGX, auto-detects arch",
      "cacheVariables": {
        "GGML_NATIVE": "ON"
      }
    },
    {
      "name": "dgx-spark-release",
      "displayName": "DGX Spark Release",
      "inherits": ["danbev-cuda-base", "release"],
      "description": "Standard release build for DGX, auto-detects arch",
      "cacheVariables": {
        "GGML_NATIVE": "ON"
      }
    },
    {
      "name": "danbev-webgpu-base",
      "hidden": true,
      "inherits": "base",
      "description": "Common flags for all my WebGPU builds",
      "generator": "Ninja",
      "cacheVariables": {
        "GGML_WEBGPU": "ON",
        "GGML_METAL": "OFF",
        "GGML_BLAS": "OFF",
        "LLAMA_CURL": "OFF",
        "LLAMA_BUILD_TESTS": "ON",
        "LLAMA_BUILD_EXAMPLES": "ON"
      }
    },
    {
      "name": "webgpu-debug",
      "displayName": "WebGPU Debug",
      "inherits": ["danbev-webgpu-base", "debug"],
      "description": "WebGPU debug build with Dawn"
    },
    {
      "name": "webgpu-release",
      "displayName": "WebGPU Release",
      "inherits": ["danbev-webgpu-base", "release"],
      "description": "WebGPU release build with Dawn"
    }
  ],
  "buildPresets": [
    {
      "name": "base-build",
      "hidden": true,
      "jobs": 12
    },
    {
      "name": "cpu-debug",
      "configurePreset": "cpu-debug",
      "inherits": "base-build"
    },
    {
      "name": "cpu-release",
      "configurePreset": "cpu-release",
      "inherits": "base-build"
    },
    {
      "name": "cuda-89-debug",
      "configurePreset": "cuda-89-debug",
      "inherits": "base-build"
    },
    {
      "name": "cuda-89-release",
      "configurePreset": "cuda-89-release",
      "inherits": "base-build"
    },
    {
      "name": "dgx-spark-debug",
      "configurePreset": "dgx-spark-debug",
      "inherits": "base-build"
    },
    {
      "name": "dgx-spark-release",
      "configurePreset": "dgx-spark-release",
      "inherits": "base-build"
    },
    {
      "name": "webgpu-debug",
      "configurePreset": "webgpu-debug",
      "inherits": "base-build"
    },
    {
      "name": "webgpu-release",
      "configurePreset": "webgpu-release",
      "inherits": "base-build"
    }
  ],
  "workflowPresets": [
    {
      "name": "dgx-spark-debug",
      "steps": [
        { "type": "configure", "name": "dgx-spark-debug" },
        { "type": "build",      "name": "dgx-spark-debug" }
      ]
    },
    {
      "name": "dgx-spark-release",
      "steps": [
        { "type": "configure", "name": "dgx-spark-release" },
        { "type": "build",      "name": "dgx-spark-release" }
      ]
    },
    {
      "name": "cuda-89-debug",
      "steps": [
        { "type": "configure", "name": "cuda-89-debug" },
        { "type": "build",      "name": "cuda-89-debug" }
      ]
    },
    {
      "name": "cuda-89-release",
      "steps": [
        { "type": "configure", "name": "cuda-89-release" },
        { "type": "build",      "name": "cuda-89-release" }
      ]
    },
    {
      "name": "webgpu-debug",
      "steps": [
        { "type": "configure", "name": "webgpu-debug" },
        { "type": "build",      "name": "webgpu-debug" }
      ]
    },
    {
      "name": "webgpu-release",
      "steps": [
        { "type": "configure", "name": "webgpu-release" },
        { "type": "build",      "name": "webgpu-release" }
      ]
    },
    {
      "name": "cpu-debug",
      "steps": [
        { "type": "configure", "name": "cpu-debug" },
        { "type": "build",      "name": "cpu-debug" }
      ]
    },
    {
      "name": "cpu-release",
      "steps": [
        { "type": "configure", "name": "cpu-release" },
        { "type": "build",      "name": "cpu-release" }
      ]
    }
  ]
}
